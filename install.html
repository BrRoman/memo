<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>Mémo Linux</title>
        <link rel="icon" href="static/images/memo.png">
        <link rel="stylesheet" href="static/css/fontawesome-free-5.7.1-web/css/all.min.css">
        <link rel="stylesheet" href="static/css/bootstrap-4.0.0-dist/css/bootstrap.min.css">
        <link rel="stylesheet/less" href="static/css/memo.less">
    </head>

    <body>
        <div id="header" class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div id="logo" class="col-3 mr-auto">
                <a href="index.html" class="d-flex align-items-center">
                    <img src="static/images/memo.png">
                    <p class="my-0">Mémo Linux</p>
                </a>
            </div>
        </div>

        <nav>
            <ul class="text-center">
                <a href="install.html"><li>Installation</li></a>
                <a href="commands.html"><li>Commandes</li></a>
                <a href="scripts.html"><li>Scripts</li></a>
                <a href="python.html"><li>Python</li></a>
                <a href="mysql.html"><li>MySQL</li><a>
                <a href="vim.html"><li>Vim</li></a>
                <a href="git.html"><li>Git</li></a>
            </ul>
        </nav>

        <!-- CONTENT -->
        <div class="d-flex flex-column align-items-center w-75 mx-auto">
            <div id="content">
                <h1>Installation Debian/Ubuntu</h1>

                <h4>Préparer la clé bootable :</h4>
                    <div class="group">
                        <p class="descr">Télécharger l'image iso de Debian (small image), et se placer dans le répertoire contenant cette image.<br>Insérer la clé USB, puis chercher son identifiant :</p>
                        <pre class="terminal">
fdisk -l
=> /dev/sdd1    *   1   487 3911796 6   FAT16</pre>
                        <p class="descr">On voit que notre clé USB est montée sur /dev/sdd.<br>Lancer la copie des fichiers :</p>
                        <p class="terminal">dd if=image.iso of=/dev/sdd bs=4M && sync</p>
                        <p class="descr">Il ne reste plus qu'à booter sur la clé USB et à se laisser guider.<br>Quand l'installateur demande s'il faut installer le paquet iwlwifi à partir d'un volume externe, dire non. Ce paquet sera installé après coup (cf. ci-dessous).</p>
                    </div>


                <h4>Installer le wifi :</h4>
                    <div class="group">
                        <p class="descr">Il faut d'abord ajouter l'option "non free" à la ligne  "deb.debian.org" du fichier /etc/apt/sources.list :</p>
                        <p class="file">deb http://deb.debian.org/debian/ buster main contrib non-free</p>
                        <p class="descr">Ensuite installer le paquet :</p>
                        <p class="terminal">apt-get install firmware-iwlwifi</p>
                    </div>


                <h4>Montage de la partition DATA au démarrage :</h4>
                    <div class="group">
                        <p class="descr">Ajouter la ligne suivante dans /etc/fstab :</p>
                        <p class="terminal">UUID=e42f2506-cd08-4910-8602-57f43ca5be49	/media/frromain/DATA	ext4	defaults	0	2</p>
                    </div>


                <h4>Installer aptitude, curl, tree, htop, ncdu, rsync.</h4>

                
                <h4>Configurer le réseau.</h4>


                <h4>Tester échanges.</h4>


                <h4>Clés SSH :</h4>
                    <div class="group">
                        <p class="terminal">ssh-keygen</p>
                        <p class="terminal">ssh-copy-id username@remote</p>
                    </div>


                <h4>Firefox :</h4>
                    <div class="group">
                        <p class="descr">Bookmarks, home, proxy, sécurité, dossier de téléchargement.</p>
                    </div>


                <h4>Vim.</h4>


                <h4>Mails (Mutt) :</h4>
                    <div class="group">
                        <p class="descr">
                            Installer mutt, ripmime, fetchmail, procmail, msmtp et links.<br>
                            Ensuite copier les fichiers de configuration : .muttrc, .fetchmailrc, .procmailrc, .msmtprc, .mailcap dans son home.<br>
                            Enfin lancer fetchmail (en mode nossl) et mutt :
                        </p>
                        <!-- TODO: Afficher le contenu des fichiers de config. -->
                        <p class="terminal">rm ~/.fetchmail.pid; fetchmail --nosslcertck -av -d 10; mutt</p>
                    </div>
                
                <!-- TODO: Crontab, cronic -->


                <h4>Configurer le proxy pour root :</h4>
                    <div class="group">
                        <p class="descr">Dans ~/.bashrc :</p>
                        <p class="terminal">export HTTP_PROXY=http://192.168.1.11:8080</p>
                        <p class="terminal">export HTTPS_PROXY=http://192.168.1.11:8080</p>
                    </div>

                    <div class="group">
                        <p class="descr">Dans ~/.wgetrc :</p>
                        <p class="terminal">HTTP_PROXY=http://192.168.1.11:8080</p>
                        <p class="terminal">HTTPS_PROXY=http://192.168.1.11:8080</p>
                    </div>


                <h4>Virtualbox :</h4>
                     <div class="group">
                        <p class="descr">Pour installer :</p>
                        <p class="terminal">wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | apt-key add -</p>
                        <p class="terminal">echo "deb [arch=amd64] http://download.virtualbox.org/virtualbox/debian bionic contrib" | tee /etc/apt/sources.list.d/virtualbox.list</p>
                        <p class="terminal">apt update</p>
                        <p class="terminal">apt install virtualbox-6.1</p>

                        <p class="descr">Pour désinstaller :</p>
                        <p class="terminal">apt-get remove virtualbox-6.1</p>
                    </div>


                <h4>Apache :</h4>
                    <div class="group">
                        <p class="descr">Ajouter o+rx sur le dossier /media/frromain.</p>

                        <p class="descr">Dupliquer /etc/apache2/sites-available/000-default.conf avant de le modifier ainsi :</p>
                        <pre class="file">
&lt;VirtualHost *:80&gt;
    ServerName localhost
    DocumentRoot /media/frromain/DATA/Sites
    &lt;Directory "/media/frromain/DATA/Sites"&gt;
        Options FollowSymLinks
        AllowOverride all
        Require all granted
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;

    &lt;Directory "/media/frromain/DATA/Sites/sql"&gt;
        Options FollowSymLinks
        AllowOverride all
        Require all granted
        Order deny,allow
        deny from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;

&lt;VirtualHost *:80&gt;
    ServerName gregorio.local
    DocumentRoot /media/frromain/DATA/Sites/gregorio-doc
    &lt;Directory "/media/frromain/DATA/Sites/gregorio-doc/"&gt;
        Options FollowSymLinks
        AllowOverride all
        Require all granted
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet</pre>

                    <p class="descr"> Pour les virtual hosts de Django sur le serveur, voir la page Python/Django.</p>
                </div>


                <h4>MySQL :</h4>
                    <div class="group">
                        <p class="descr">MySQL8 n'est pas dispo dans les paquets Debian. Il faut l'installer manuellement à partir d'un dépôt distant :</p>
                        <p class="terminal">cd /tmp</p>
                        <p class="terminal">wget https://dev.mysql.com/get/mysql-apt-config_0.8.13-1_all.deb</p>
                        <p class="terminal">dpkg -i mysql-apt-config_0.8.13-1_all.deb</p>

                        <p class="descr">Puis :</p>
                        <p class="terminal">apt update</p>
                        <p class="terminal">apt install mysql-server</p>

                        <p class="descr">Puis :</p>
                        <p class="terminal">mysql_secure_installation</p>

                        <p class="descr">Enfin dans une console MySQL :</p>
                        <p class="terminal">ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '&lt;my_password&gt;';</p>                    </div>


                <h4>PHP7.3.</h4>


                <h4>Importer les bases de données.</h4>


                <h4>Polices :</h4>
                    <div class="group">
                        <p class="descr">Fonts à copier dans /etc/share/fonts (ttf dans truetype et otf dans opentype). Puis :</p>
                        <p class="terminal">fc-cache -fv</p>
                    </div>


                <h4>LaTeX :</h4>
                    <div class="group">
                        <p class="descr">Installer texlive texlive-luatex texlive-xetex texlive-lang-european texlive-lang-french.</p>
                        <p class="descr">Ne pas installer texlive-full, qui semble faire des problèmes.</p>
                    </div>
                

                <h4>Gregorio :</h4>
                    <div class="group">
                        <p class="descr">Télécharger l'archive tar.bz2 sur le site de gregorio (releases).</p>
                        <p class="descr">Désarchiver.</p>
                        <p class="descr">Dans le dossier obtenu :</p>
                        <p class="terminal">./build.sh</p>
                        <p class="terminal">./install.sh</p>
                    </div>


                <h4>Git et ~/.gitconfig.</h4>
                    <!-- TODO: Display content of .gitconfig. -->


                <h4>VSCode :</h4>
                    <div class="group">
                        <p class="descr">Clé :</p>
                        <p class="terminal">curl --proxy http://192.168.1.11:8080 https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg</p>
                        <p class="terminal">install -o root -g root -m 644 microsoft.gpg /etc/apt/trusted.gpg.d/</p>
                        <p class="descr">Dépôt :</p>
                        <p class="terminal">echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/vscode.list</p>
                        <p class="descr">Installation proprement dite :</p>
                        <p class="terminal">apt update</p>
                        <p class="terminal">apt install code</p>
                        <!-- TODO: contenu du fichier de config.
                        <p class="descr">Fichier de config (~/.vscode…) :</p>
                        <pre class="file">
                        </pre> -->
                        <p class="descr">Installer les extensions :</p>
                        <pre class="file">
Auto close tags
Auto rename tags
Beautify
Bookmarks
Bracket pair colorizer
CSS peek
Django
Git graph
Highlight matching tags
jQuery code snippets
LaTeX workshop
Markdown all in one
PHP debug
PHP intellisense
Project manager
Python
Todo tree</pre>
                    </div>


                <h4>XnView, RawTherapee.</h4>
            </div>
        </div>
        <!-- END CONTENT -->
    </body>

    <script src="static/js/jquery-3.3.1.min.js"></script>
    <script src="static/css/bootstrap-4.0.0-dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/less.min.js"></script>
</html>